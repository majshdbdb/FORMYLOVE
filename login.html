// Show loading
            button.textContent = 'Logging in...';
            button.disabled = true;
            
            try {
                const { data, error } = await window.supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) throw error;
                
                showMessage('✅ Login berhasil! Mengalihkan...', 'success');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1000);
                
            } catch (error) {
                showMessage('❌ Login gagal: ' + error.message, 'error');
            } finally {
                button.textContent = originalText;
                button.disabled = false;
            }
        });
        
        function showMessage(message, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = message;
            messageDiv.className = type;
        }

        // Check if user is already logged in
        async function checkExistingSession() {
            const { data: { session } } = await window.supabase.auth.getSession();
            if (session) {
                window.location.href = 'dashboard.html';
            }
        }

        // Check session on page load
        checkExistingSession();
    </script>
</body>
</html>
